---
title: 正则表达式去除外链
date: 2018-11-13 08:53:53
tags: 正则表达式
categories: 工作
---
### 使用正则表达式去除HTML中的 `<A>`标签中包含的外链接

js代码如下：
```
function clearLink(html){
  // 其中"nyt.hubei.gov.cn"和"www.hbagri.gov.cn"为内链，表示不去除
   var regx = /href=\"((?!nyt\.hubei\.gov\.cn)(?!www\.hbagri\.gov\.cn).)*\"/g;
   var arr = html.match(regx);
   if(arr != null){
     // text 为HTML中包含的所有外链
     var text = "";
     for ( var i = 0; i <arr.length; i++){
      text = text + arr[i] + "； \r\n";
     }
     //将外链替换成href="replace"，replace为占位
     html = html.replace(regx,'href="replace"');
     var regx2 = /<a\b[^>]+\bhref=\"replace\"[^>]*>([\s\S]*?)<\/a>/g
     //获取href="replace" 的所有<A>标签
     var arr1 = html.match(regx2)
     //去除便签保留标签中内容
     var regx3 = /<\/?[^>]+>/g;
     if(arr != null){
       for(var i = 0; i < arr1.length; i++){
         //替换内容（将带<A>标签的文本替换成不带<A>标签的文本）
         html = html.replace(arr1[i],arr1[i].replace(regx3,""));
       }
     }
     console.log(html);
   }
 }
```
